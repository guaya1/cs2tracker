<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CS2 Game Tracker</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  :root {
    --primary: #ff5500;
    --primary-dark: #e64a00;
    --dark: #121212;
    --dark-light: #1e1e1e;
    --gray: #2d2d2d;
    --light-gray: #3d3d3d;
    --text: #f0f0f0;
    --win: #4caf50;
    --loss: #f44336;
  }
  
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--dark);
    color: var(--text);
    line-height: 1.6;
    padding: 0;
  }
  
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }
  
  header {
    background-color: var(--dark-light);
    padding: 20px;
    border-bottom: 2px solid var(--primary);
    margin-bottom: 30px;
  }
  
  h1 {
    color: var(--primary);
    text-align: center;
    font-size: 2.5rem;
    margin-bottom: 10px;
  }
  
  .subtitle {
    text-align: center;
    color: #aaa;
    margin-bottom: 20px;
  }
  
  .dashboard {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 20px;
    margin-bottom: 30px;
  }
  
  @media (max-width: 900px) {
    .dashboard {
      grid-template-columns: 1fr;
    }
  }
  
  .card {
    background-color: var(--dark-light);
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }
  
  .card-title {
    font-size: 1.2rem;
    margin-bottom: 15px;
    color: var(--primary);
    border-bottom: 1px solid var(--gray);
    padding-bottom: 10px;
  }
  
  .form-group {
    margin-bottom: 15px;
  }
  
  label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
  }
  
  input, select {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--gray);
    border-radius: 4px;
    background-color: var(--dark);
    color: var(--text);
  }
  
  button {
    background-color: var(--primary);
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.3s;
    width: 100%;
  }
  
  button:hover {
    background-color: var(--primary-dark);
  }
  
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
  }
  
  .stat-card {
    background-color: var(--gray);
    border-radius: 6px;
    padding: 15px;
    text-align: center;
  }
  
  .stat-value {
    font-size: 1.8rem;
    font-weight: bold;
    margin: 10px 0;
    color: var(--primary);
  }
  
  .stat-label {
    font-size: 0.9rem;
    color: #aaa;
  }
  
  .win {
    color: var(--win);
  }
  
  .loss {
    color: var(--loss);
  }
  
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }
  
  th, td {
    padding: 12px 15px;
    text-align: center;
    border-bottom: 1px solid var(--gray);
  }
  
  th {
    background-color: var(--gray);
    font-weight: 600;
  }
  
  tr:hover {
    background-color: var(--light-gray);
  }
  
  .result-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 4px;
    font-weight: bold;
    font-size: 0.85rem;
  }
  
  .win-badge {
    background-color: rgba(76, 175, 80, 0.2);
    color: var(--win);
  }
  
  .loss-badge {
    background-color: rgba(244, 67, 54, 0.2);
    color: var(--loss);
  }
  
  .action-buttons {
    display: flex;
    gap: 10px;
    margin-top: 20px;
  }
  
  .btn-secondary {
    background-color: var(--gray);
  }
  
  .btn-secondary:hover {
    background-color: var(--light-gray);
  }
  
  .map-stats {
    margin-top: 20px;
  }
  
  .map-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    padding: 10px;
    background-color: var(--gray);
    border-radius: 4px;
  }
  
  .map-name {
    font-weight: 500;
  }
  
  .map-win-rate {
    color: var(--primary);
    font-weight: bold;
  }
  
  .progress-bar {
    height: 6px;
    background-color: var(--dark);
    border-radius: 3px;
    margin-top: 5px;
    overflow: hidden;
  }
  
  .progress {
    height: 100%;
    background-color: var(--primary);
  }
  
  .section-title {
    font-size: 1.5rem;
    margin: 30px 0 20px;
    color: var(--primary);
    padding-bottom: 10px;
    border-bottom: 1px solid var(--gray);
  }
  
  .export-import {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }
  
  .hidden {
    display: none;
  }
  
  .notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 15px 20px;
    background-color: var(--dark-light);
    color: var(--text);
    border-left: 4px solid var(--primary);
    border-radius: 4px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transform: translateX(100%);
    transition: transform 0.3s ease;
    z-index: 1000;
  }
  
  .notification.show {
    transform: translateX(0);
  }
</style>
</head>
<body>
<header>
  <div class="container">
    <h1>CS2 Game Tracker</h1>
    <p class="subtitle">Track and analyze your CS2 performance</p>
  </div>
</header>

<div class="container">
  <div class="dashboard">
    <div class="card">
      <h2 class="card-title">Add New Game</h2>
      <form id="gameForm">
        <div class="form-group">
          <label for="map">Map</label>
          <select id="map" required>
            <option value="">Select a map</option>
            <option value="Dust II">Dust II</option>
            <option value="Mirage">Mirage</option>
            <option value="Inferno">Inferno</option>
            <option value="Nuke">Nuke</option>
            <option value="Overpass">Overpass</option>
            <option value="Vertigo">Vertigo</option>
            <option value="Ancient">Ancient</option>
            <option value="Anubis">Anubis</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="kills">Kills</label>
          <input type="number" id="kills" min="0" required>
        </div>
        
        <div class="form-group">
          <label for="deaths">Deaths</label>
          <input type="number" id="deaths" min="0" required>
        </div>
        
        <div class="form-group">
          <label for="headshots">Headshots</label>
          <input type="number" id="headshots" min="0" required>
        </div>
        
        <div class="form-group">
          <label for="damage">Damage</label>
          <input type="number" id="damage" min="0" required>
        </div>
        
        <div class="form-group">
          <label for="rounds">Rounds Played</label>
          <input type="number" id="rounds" min="1" required>
        </div>
        
        <div class="form-group">
          <label for="result">Result</label>
          <select id="result" required>
            <option value="win">Win</option>
            <option value="loss">Loss</option>
          </select>
        </div>
        
        <button type="submit"><i class="fas fa-plus-circle"></i> Add Game</button>
      </form>
      
      <div class="action-buttons">
        <button id="exportBtn" class="btn-secondary"><i class="fas fa-download"></i> Export Data</button>
        <button id="importBtn" class="btn-secondary"><i class="fas fa-upload"></i> Import Data</button>
        <input type="file" id="importFile" class="hidden" accept=".json">
      </div>
    </div>
    
    <div class="card">
      <h2 class="card-title">Performance Overview</h2>
      <div id="stats">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Total Games</div>
            <div class="stat-value" id="total-games">0</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">Win Rate</div>
            <div class="stat-value" id="win-rate">0%</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">K/D Ratio</div>
            <div class="stat-value" id="kd-ratio">0.00</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">HS Percentage</div>
            <div class="stat-value" id="hs-percent">0%</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-label">ADR</div>
            <div class="stat-value" id="adr">0</div>
          </div>
        </div>
        
        <h3>Map Performance</h3>
        <div class="map-stats" id="map-stats">
          <p>No games recorded yet. Add your first game to see statistics.</p>
        </div>
      </div>
    </div>
  </div>
  
  <h2 class="section-title">Match History</h2>
  <div class="card">
    <table id="gameTable">
      <thead>
        <tr>
          <th>Map</th>
          <th>Kills</th>
          <th>Deaths</th>
          <th>K/D</th>
          <th>HS</th>
          <th>Damage</th>
          <th>ADR</th>
          <th>Rounds</th>
          <th>Result</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td colspan="10" style="text-align: center;">No games recorded yet.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div id="notification" class="notification">Game added successfully!</div>

<script>
// Initialize games array from localStorage or empty array
let games = JSON.parse(localStorage.getItem('cs2-games')) || [];

// DOM elements
const gameForm = document.getElementById('gameForm');
const gameTable = document.getElementById('gameTable');
const statsContainer = document.getElementById('stats');
const mapStatsContainer = document.getElementById('map-stats');
const exportBtn = document.getElementById('exportBtn');
const importBtn = document.getElementById('importBtn');
const importFile = document.getElementById('importFile');
const notification = document.getElementById('notification');

// Initialize the page
document.addEventListener('DOMContentLoaded', () => {
  updateTable();
  displayStats();
  
  // Set up event listeners
  gameForm.addEventListener('submit', addGame);
  exportBtn.addEventListener('click', exportData);
  importBtn.addEventListener('click', () => importFile.click());
  importFile.addEventListener('change', importData);
});

function addGame(e) {
  e.preventDefault();

  const game = {
    id: Date.now(), // Unique ID for each game
    map: document.getElementById('map').value,
    kills: parseInt(document.getElementById('kills').value),
    deaths: parseInt(document.getElementById('deaths').value),
    headshots: parseInt(document.getElementById('headshots').value),
    damage: parseInt(document.getElementById('damage').value),
    rounds: parseInt(document.getElementById('rounds').value),
    result: document.getElementById('result').value,
    date: new Date().toLocaleDateString()
  };

  games.push(game);
  saveGames();
  updateTable();
  displayStats();
  showNotification('Game added successfully!');
  gameForm.reset();
}

function deleteGame(id) {
  if (confirm('Are you sure you want to delete this game?')) {
    games = games.filter(game => game.id !== id);
    saveGames();
    updateTable();
    displayStats();
    showNotification('Game deleted successfully!');
  }
}

function updateTable() {
  const tbody = document.querySelector('#gameTable tbody');
  
  if (games.length === 0) {
    tbody.innerHTML = '<tr><td colspan="10" style="text-align: center;">No games recorded yet.</td></tr>';
    return;
  }
  
  tbody.innerHTML = '';
  games.forEach(g => {
    const kd = g.deaths === 0 ? g.kills : (g.kills / g.deaths).toFixed(2);
    const adr = g.rounds === 0 ? 0 : (g.damage / g.rounds).toFixed(0);
    const hsPercent = g.kills === 0 ? 0 : ((g.headshots / g.kills) * 100).toFixed(0);
    
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${g.map}</td>
      <td>${g.kills}</td>
      <td>${g.deaths}</td>
      <td>${kd}</td>
      <td>${hsPercent}%</td>
      <td>${g.damage}</td>
      <td>${adr}</td>
      <td>${g.rounds}</td>
      <td><span class="result-badge ${g.result === 'win' ? 'win-badge' : 'loss-badge'}">${g.result}</span></td>
      <td>
        <button onclick="deleteGame(${g.id})" class="btn-secondary" style="padding: 5px 10px; width: auto;">
          <i class="fas fa-trash"></i>
        </button>
      </td>
    `;
    tbody.appendChild(row);
  });
}

function displayStats() {
  if (games.length === 0) {
    document.getElementById('total-games').textContent = '0';
    document.getElementById('win-rate').textContent = '0%';
    document.getElementById('kd-ratio').textContent = '0.00';
    document.getElementById('hs-percent').textContent = '0%';
    document.getElementById('adr').textContent = '0';
    mapStatsContainer.innerHTML = '<p>No games recorded yet. Add your first game to see statistics.</p>';
    return;
  }

  const totalGames = games.length;
  const totalWins = games.filter(g => g.result === 'win').length;
  const winRate = ((totalWins / totalGames) * 100).toFixed(1);

  const totalKills = games.reduce((sum, g) => sum + g.kills, 0);
  const totalDeaths = games.reduce((sum, g) => sum + g.deaths, 0);
  const kd = totalDeaths === 0 ? totalKills.toFixed(2) : (totalKills / totalDeaths).toFixed(2);

  const totalHeadshots = games.reduce((sum, g) => sum + g.headshots, 0);
  const headshotPercent = totalKills === 0 ? '0' : ((totalHeadshots / totalKills) * 100).toFixed(0);

  const totalDamage = games.reduce((sum, g) => sum + g.damage, 0);
  const totalRounds = games.reduce((sum, g) => sum + g.rounds, 0);
  const adr = totalRounds === 0 ? '0' : (totalDamage / totalRounds).toFixed(0);

  // Update stat cards
  document.getElementById('total-games').textContent = totalGames;
  document.getElementById('win-rate').textContent = `${winRate}%`;
  document.getElementById('kd-ratio').textContent = kd;
  document.getElementById('hs-percent').textContent = `${headshotPercent}%`;
  document.getElementById('adr').textContent = adr;

  // Map-specific win rates
  const mapStats = {};
  games.forEach(g => {
    if (!mapStats[g.map]) {
      mapStats[g.map] = { wins: 0, games: 0 };
    }
    mapStats[g.map].games++;
    if (g.result === 'win') mapStats[g.map].wins++;
  });

  let mapStatsHtml = '';
  for (let map in mapStats) {
    const winRate = ((mapStats[map].wins / mapStats[map].games) * 100).toFixed(1);
    mapStatsHtml += `
      <div class="map-item">
        <div>
          <div class="map-name">${map}</div>
          <div class="progress-bar">
            <div class="progress" style="width: ${winRate}%"></div>
          </div>
        </div>
        <div class="map-win-rate">${winRate}%</div>
      </div>
    `;
  }

  mapStatsContainer.innerHTML = mapStatsHtml;
}

function saveGames() {
  localStorage.setItem('cs2-games', JSON.stringify(games));
}

function exportData() {
  const dataStr = JSON.stringify(games);
  const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
  
  const exportFileDefaultName = 'cs2-games.json';
  
  const linkElement = document.createElement('a');
  linkElement.setAttribute('href', dataUri);
  linkElement.setAttribute('download', exportFileDefaultName);
  linkElement.click();
  
  showNotification('Data exported successfully!');
}

function importData(event) {
  const file = event.target.files[0];
  if (!file) return;
  
  const reader = new FileReader();
  reader.onload = function(e) {
    try {
      const importedGames = JSON.parse(e.target.result);
      if (Array.isArray(importedGames)) {
        // Add imported games with new IDs to avoid conflicts
        const newGames = importedGames.map(game => ({
          ...game,
          id: Date.now() + Math.floor(Math.random() * 1000) // New unique ID
        }));
        
        games = [...games, ...newGames];
        saveGames();
        updateTable();
        displayStats();
        showNotification('Data imported successfully!');
      } else {
        alert('Invalid file format.');
      }
    } catch (error) {
      alert('Error parsing file: ' + error.message);
    }
  };
  reader.readAsText(file);
  // Reset the file input
  event.target.value = '';
}

function showNotification(message) {
  notification.textContent = message;
  notification.classList.add('show');
  
  setTimeout(() => {
    notification.classList.remove('show');
  }, 3000);
}
</script>

</body>
</html>